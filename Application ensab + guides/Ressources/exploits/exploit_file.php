<?php
$ip = "127.0.0.1";
$port = 12345;
//chemin du fichier de configuration
$filePath = '../includes/config.php';

$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);
socket_bind($socket, $ip, $port);
socket_listen($socket);
echo "Server listening on $ip:$port...\n";
$clientSocket = socket_accept($socket);
$handle = fopen($filePath, 'r');

while (!feof($handle)) {
    $fileChunk = fread($handle, 1024);
    socket_write($clientSocket, $fileChunk, strlen($fileChunk));
}

fclose($handle);
socket_close($clientSocket);
socket_close($socket);
?>